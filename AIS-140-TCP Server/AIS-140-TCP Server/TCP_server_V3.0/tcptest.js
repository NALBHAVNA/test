const net = require('net');
const colors = require('colors')
var RandExp = require('randexp')
const serverConfig = require('./Sending_command/config').SERVER_CONFIG
var sent=0;
const client = new net.Socket();
client.setEncoding('utf8')
client.connect(serverConfig.PORT, serverConfig.HOST, function () {
    var timespace=50;
    var imei_1 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_2 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_3 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_1 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_4 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_5 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_6 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_7 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_8 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_9 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_10 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_11 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_12 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_13 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_14 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_15 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_16 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_17 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_18 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_19 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_20 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_21 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_22 = new RandExp(/^[0-9]{15,15}$/).gen();
    var imei_23 = new RandExp(/^[0-9]{15,15}$/).gen();
    const data1=`$,AP09BU9365,${"$"+imei_1},$2.6,$1.0,$28.670875,$N,$077.226165,$E! $,N,NIPPON,2.6,NR,01,L,358943051517899,AP09BU9365,0,00000000,000000,00.000000,N,000.000000,E,000.0,000.00,00,00000.0,000.0,000.0,CELLONE,0,1,26.0,00.1,1,C,15,404,64,0926,A643,0926,A52A,15,FFFF,0000,10,FFFF,0000,09,FFFF,0000,09,1000,00,00.46,00.12,340132,B1,-0.02,-0.02,-0.02,-0.02,0.99,1.00,*`
    const data2=`$,AP09BU9365,${"$"+imei_2},$2.6,$1.0,$28.670875,$N,$077.226165,$E! 
    $,N,NIPPON,2.6,NR,01,L,${imei_2},AP09BU9365,0,00000000,000000,00.000000,N,000.000000,E,000.0,000.00,00,00000.0,000.0,000.0,CELLONE,0,1,26.0,00.1,1,C,15,404,64,0926,A643,0926,A52A,15,FFFF,0000,10,FFFF,0000,09,FFFF,0000,09,1000,00,00.46,00.12,340132,B1,-0.02,-0.02,-0.02,-0.02,0.99,1.00,*`
    const data3=` $,AP09BU9365,${"$"+imei_3},$2.6,$1.0,$28.670875,$N,$077.226165,$E! $,N,NIPPON,2.6,NR,01,L,358943051517899,AP09BU9365,0,00000000,000000,00.000000,N,000.000000,E,000.0,000.00,00,00000.0,000.0,000.0,CELLONE,0,1,26.0,00.1,1,C,15,404,64,0926,A643,0926,A52A,15,FFFF,0000,10,FFFF,0000,09,FFFF,0000,09,1000,00,00.46,00.12,340132,B1,-0.02,-0.02,-0.02,-0.02,0.99,1.00,*`
    const data4=`$,AP09BU9365,${"$"+imei_3},$2.6,$1.0,$28.670875,$N,$077.226165,$E!`
    const data5=` $,AP09BU9365,${"$"+imei_3},$2.6,$1.0,$28.670875,$N,$077.226165,$E!`
    const data6=`$,GPRS,${imei_4}, OK ! $,N,NIPPON,2.6,NR,01,L,${imei_4},AP09BU9365,0,00000000,000000,00.000000,N,000.000000,E,000.0,000.00,00,00000.0,000.0,000.0,CELLONE,0,1,26.0,00.1,1,C,15,404,64,0926,A643,0926,A52A,15,FFFF,0000,10,FFFF,0000,09,FFFF,0000,09,1000,00,00.46,00.12,340132,B1,-0.02,-0.02,-0.02,-0.02,0.99,1.00,*`
    const data7=`$,GPRS,${imei_4}, 
    OK 
    ! 
    $,N,NIPPON,2.6,NR,01,L,${imei_5},AP09BU9365,0,00000000,000000,00.000000,N,000.000000,E,000.0,000.00,00,00000.0,000.0,000.0,CELLONE,0,1,26.0,00.1,1,C,15,404,64,0926,A643,0926,A52A,15,FFFF,0000,10,FFFF,0000,09,FFFF,0000,09,1000,00,00.46,00.12,340132,B1,-0.02,-0.02,-0.02,-0.02,0.99,1.00,*`
    const data8=` $,GPRS,${imei_6}, OK ! $,N,NIPPON,2.6,NR,01,L,${imei_6},AP09BU9365,0,00000000,000000,00.000000,N,000.000000,E,000.0,000.00,00,00000.0,000.0,000.0,CELLONE,0,1,26.0,00.1,1,C,15,404,64,0926,A643,0926,A52A,15,FFFF,0000,10,FFFF,0000,09,FFFF,0000,09,1000,00,00.46,00.12,340132,B1,-0.02,-0.02,-0.02,-0.02,0.99,1.00,*`
    const data9=`$,GPRS,${imei_4}, OK !`
    const data10=` $,GPRS,${imei_4}, OK !`
    const data11=`$,GPRS,${imei_4}, 
    OK 
    !`
    const data12=`$,N,NIPPON,2.6,NR,02,H,${imei_7},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,* $,GPRS,${imei_4}, OK !`
    const data13=`$,N,NIPPON,2.6,NR,02,H,${imei_8},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,* 
    $,GPRS,${imei_8},
    OK 
    !`
    const data14=` $,N,NIPPON,2.6,NR,02,H,${imei_9},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,* $,GPRS,${imei_4}, OK !`
    const data15=`$,N,NIPPON,2.6,NR,02,H,${imei_10},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,* $,AP09BU9365,$${imei_19},$2.6,$1.0,$28.670875,$N,$077.226165,$E!`
    const data16=`$,N,NIPPON,2.6,NR,02,H,${imei_11},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,* 
    $,AP09BU9365,$${"$"+imei_4},$2.6,$1.0,$28.670875,$N,$077.226165,$E!`
    const data17=` $,N,NIPPON,2.6,NR,02,H,${imei_12},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,* $,AP09BU9365,${"$"+imei_12},$2.6,$1.0,$28.670875,$N,$077.226165,$E!`
    const data18=`$,N,NIPPON,2.6,NR,02,H,${imei_13},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,*$,N,NIPPON,2.6,NR,02,H,${imei_14},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,*$,N,NIPPON,2.6,NR,02,H,${imei_15},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,*`
    const data19=` $,N,NIPPON,2.6,NR,02,H,${imei_16},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,* $,N,NIPPON,2.6,NR,02,H,${imei_17},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,* $,N,NIPPON,2.6,NR,02,H,${imei_18},AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,*`
    var data =[data1,data2,data3,data4,data5,data6,data7,data8,data9,data10,data11,data12,data13,data14,data15,data16,data17,data18,data19];


    for(var m=0;m<19;m++){
        // console.log(data[m]);
        setTimeout((m) => {
            client.write(data[m],'utf8')
        }, timespace*m,m);

        // 18 DB insertions
}
    // var imei_2 = new RandExp(/^[0-9]{15,15}$/).gen();
    //     //let data=`$,N,NIPPON,2.0,HA,14,H,358943051524779,AP09BU9365,1,24032019,070420,12.933209,N,077.688743,E,051.8,227.13,12,00888.0,001.1,000.6,IDEA,1,1,15.3,00.1,0,C,27,404,44,09D4,5231,09D4,58C3,28,09D4,58C2,25,09D4,0000,25,FFFF,0000,24,0000,00,383201,9B,*
    //     //$,GPRS,358943051517893, OK ! `;
    //     let data=`$,N,NIPPON,2.6,NR,02,H,358943051628582,AP09BU9365,1,13032019,141615,28.670875,N,077.226165,E,004.5,212.07,06,00228.6,002.6,001.8,0,0,1,14.4,05.6,0,C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0000,00,00.45,00.08,153905,B9,0.00,-0.52,0.00,0.01,0.00,0.89,* $,AP09BU9365,$358943051628518,$2.6,$1.0,$28.670875,$N,$077.226165,$E!`;
    //     client.write(JSON.stringify(data));
})
    

client.on('data', function (data) {
    console.log('server :'.cyan + data);

})
client.on('close', function () {
    console.log('server :' + 'rejected'.bold);
    process.exit(0);
})
client.on('error', function (err) {
    console.log('server :'.cyan + "error".red, err);
})

 